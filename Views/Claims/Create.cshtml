@{
    ViewData["Title"] = "Submit Claim";
    var lecturerId = (int)ViewBag.LecturerId;
}

<h2>Submit Claim</h2>

<div class="card">
    <div class="card-body">
        <form asp-action="Create" method="post" enctype="multipart/form-data" class="row g-3">
            <input type="hidden" name="lecturerId" value="@lecturerId" />

            <div class="col-md-4">
                <label class="form-label">Hours Worked</label>
                <input id="hoursWorked" class="form-control" type="number" name="hoursWorked" step="0.1" min="0.1" required />
            </div>

            <div class="col-md-4">
                <label class="form-label">Hourly Rate (ZAR)</label>
                <input id="hourlyRate" class="form-control" type="number" name="hourlyRate" step="0.01" min="0" required />
            </div>

            <div class="col-md-4">
                <label class="form-label">Computed Amount (ZAR)</label>
                <input id="computedAmount" class="form-control" type="text" readonly value="0.00" />
            </div>

            <div class="col-12">
                <label class="form-label">Notes (optional)</label>
                <textarea class="form-control" name="notes" rows="3"></textarea>
            </div>

            <div class="col-12">
                <label class="form-label">Supporting Documents (pdf, docx, xlsx) - max 5MB each</label>
                <input class="form-control" type="file" name="files" multiple />
            </div>

            <div class="col-12">
                <button id="submitBtn" type="submit" class="btn btn-primary">Submit Claim</button>
                <a class="btn btn-secondary" href="/Claims/MyClaims?lecturerId=@lecturerId">Cancel</a>
            </div>
        </form>
    </div>
</div>

@section Scripts {
    <script>
        (function(){
            const hours = document.getElementById('hoursWorked');
            const rate = document.getElementById('hourlyRate');
            const amount = document.getElementById('computedAmount');

            function compute() {
                const h = parseFloat(hours.value || 0);
                const r = parseFloat(rate.value || 0);
                const a = (h * r).toFixed(2);
                amount.value = a;
            }

            hours.addEventListener('input', compute);
            rate.addEventListener('input', compute);

            // compute on page load
            compute();
        })();
    </script>
}
